<h1>UpdateDatabase</h1>

<p>This small application has two modes of running.</p>

<ol>
<li>Update mode</li>
<li>Upgrade mode</li>
</ol>

<h2>Update mode</h2>

<p>The user is presented with options to decide the new version number. A snapshot is then created with that version.</p>

<h3>Examples</h3>

<pre><code>    UpdateDatabase.exe
</code></pre>

<p>or</p>

<pre><code>    UpdateDatabase.exe "C:\Development\Project.Database\Project.Database.sqlproj"
</code></pre>

<h2>Upgrade mode</h2>

<p>When a publish-file with or without extension (<code>.publish.xml</code>) is specified, the following steps will be taken:</p>

<ol>
<li>Load project-file (<code>.sqlproj</code> from same folder as the publish-file)</li>
<li>Find the latest snapshot (by sorted filenames)</li>
<li>Look up the target database version and compare to <code>.dacpac</code>-file</li>
</ol>

<p>Then, depending on the version comparison, one of the following tasks will be executed:</p>

<ul>
<li>Create database if the target doesn't exist</li>
<li>Upgrade database if <code>.dacpac</code>-version is newer than existing</li>
<li>Do nothing if the version is the same</li>
</ul>

<h3>Example</h3>

<pre><code>    UpdateDatabase.exe /p:"C:\Development\Project.Database\DevSqlDeploy.publish.xml"
</code></pre>

<h1>Roadmap</h1>

<h1>DAC Upgrader</h1>

<h1>Deployment-mode</h1>

<ol>
<li>Find the latest version in History-folder</li>
<li>Check the deployment target's version.
<ul>
<li>The target has the same version -> Stop.</li>
<li>The target does not exist -> Deploy latest version.</li>
<li>The target has an older version.
<ol>
<li>Locate the older version in the upgrades folder and select all version since (excluding the current version and including the latest version).</li>
<li>Sequentially deploy each version increment</li>
</ol></li>
</ul></li>
</ol>
